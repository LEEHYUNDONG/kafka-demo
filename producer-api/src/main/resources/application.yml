spring:
  application:
    name: kafka-demo-producer

server:
  port: 8080

# MSK 또는 Local Kafka 공통 설정
application:
  kafka:
    # MSK 엔드포인트 (환경 변수로 오버라이드 가능)
    # 예: b-1.mycluster.xxxxx.kafka.ap-northeast-2.amazonaws.com:9092,b-2.mycluster.xxxxx.kafka.ap-northeast-2.amazonaws.com:9092
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

    # MSK 보안 설정 (기본값: PLAINTEXT, MSK는 SASL_SSL 사용)
    security-protocol: ${KAFKA_SECURITY_PROTOCOL:PLAINTEXT}

    # MSK IAM 인증 사용 시 (aws-msk-iam-auth 라이브러리 필요)
    sasl-mechanism: ${KAFKA_SASL_MECHANISM:}
    sasl-jaas-config: ${KAFKA_SASL_JAAS_CONFIG:}

    client-id: kafka-demo

    consumer:
      group-id: kafka-demo-consumer-group
      auto-offset-reset: earliest
      concurrency: 10

    producer:
      enable-adaptive-partitioning: true
      # MSK 권장 설정
      acks: all
      retries: 3
      max-in-flight-requests: 5

    topic:
      name: kafka-demo-topic
      partitions: 3
      replication-factor: 2  # MSK는 최소 2개 replica 권장
      configs:
        retention.ms: "604800000"  # 7일
        min.insync.replicas: "2"    # MSK 권장